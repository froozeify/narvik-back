"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[787],{8547:(e,t,n)=>{n(739),n(9693),n(228),n(7522),n(8932),n(24),n(2826),n(560),n(9288),n(6869),Object.defineProperty(t,"__esModule",{value:!0});var i=n(6111),o=function(){function e(e){var t=e.$el;this.refreshPage=!1,this.$el=t,this.$activities=this.$el.querySelectorAll(".activities input"),this.bindEvents(),this.init()}return e.prototype.init=function(){},e.prototype.bindEvents=function(){var e=this;this.$el.addEventListener("close",(function(t){e.closeModal()})),this.$activities.forEach((function(t){t.addEventListener("change",(function(t){console.log("SENDING..."),e.sendActivities()}))}))},e.prototype.showModal=function(){this.$el.showModal()},e.prototype.closeModal=function(){this.$el.close(),this.$activities.forEach((function(e){e.checked=!1})),this.refreshPage&&(this.refreshPage=!1,location.reload())},e.prototype.updateContent=function(e,t,n,i){this.memberId=e,this.memberLicence=t,this.memberFullName=n,i&&i.length>0&&this.$activities.forEach((function(e){e.checked=!1,i.forEach((function(t){e.value!=t||(e.checked=!0)}))}));var o=this.$el.querySelector(".activities");o.dataset.id=e.toString(),o.dataset.licence=t.toString(),this.$el.querySelector(".member-name").innerHTML=n},e.prototype.sendActivities=function(){var e=this,t=[];this.$activities.forEach((function(e){e.checked&&t.push(Number(e.value))})),(0,i.patchData)("/members/".concat(this.memberId,"/today-activities"),{activities:t}).then((function(t){200==t.status&&t.json().then((function(t){e.refreshPage=!0,console.log(t),clearTimeout(e.timeoutSendActivities),e.timeoutSendActivities=setTimeout((function(){e.closeModal()}),4e3)}))}))},e}();t.default=o},9458:(e,t,n)=>{n(739),n(7049),n(1694),n(9693),n(228),n(7522),n(3964),n(560),n(9288),n(6869),n(4043),n(7409),n(4338),n(2022);var i,o,r=n(8547),c=document.querySelector(".list.members"),a=Array.from(c.querySelectorAll(".member")),s=document.querySelector("#add-logbook"),l=document.querySelector("#add-presence-wrapper"),u=l.querySelector("#presence-input"),d=l.querySelector(".results");function f(e){fetch("/presence-list/search/"+e,{}).then((function(e){return e.json()})).then((function(t){var n="";if(t.length<1)console.log("No result found!");else{var i=/^\d+$/.test(e);1===t.length||i&&e.length>=8?v(Number(t[0].id),t[0].licence,t[0].fullName):(t.forEach((function(e){n+='\n          <div class="result" data-id="'.concat(e.id,'" data-licence="').concat(e.licence,'" data-fullname="').concat(e.fullName,'">\n              ').concat(e.lastname," ").concat(e.firstname,"\n          </div>\n        ")})),d.innerHTML=n,d.querySelectorAll(".result").forEach((function(e){e instanceof HTMLElement&&e.addEventListener("click",(function(t){v(Number(e.dataset.id),e.dataset.licence,e.dataset.fullname)}))})))}}))}function h(){d.innerHTML="",u.value=""}function v(e,t,n){h();var o=!1;a.forEach((function(e){if(e.dataset.licence==t)return o=!0,void e.click()})),o||(i.updateContent(e,t,n),i.showModal())}document.addEventListener("DOMContentLoaded",(function(){i=new r.default({$el:document.querySelector("#modal-update-presence")})})),a.forEach((function(e){e.addEventListener("click",(function(t){if(t.preventDefault(),!e.classList.contains("selected")){a.forEach((function(e){return e.classList.remove("selected")})),e.classList.add("selected");var n=document.querySelector("#main-aside .member-detail-placeholder");n.classList.remove("hidden"),document.querySelector("#main-aside .member-detail").classList.add("hidden"),fetch("/presence-list/"+e.dataset.id,{}).then((function(e){return e.text()})).then((function(e){var t;n.classList.add("hidden"),document.querySelector("#main-aside .member-detail").outerHTML=e,(t=document.querySelector("#main-aside .member-detail")).querySelector(".edit-member").addEventListener("click",(function(e){var n=[];t.querySelectorAll(".activities .activity").forEach((function(e){e instanceof HTMLElement&&n.push(e.dataset.id)})),i.updateContent(Number(t.dataset.id),t.dataset.licence,t.dataset.fullname,n),i.showModal()}))}))}}))})),s.addEventListener("click",(function(e){e.preventDefault(),document.querySelector("#modal-add-logbook").showModal()})),u.addEventListener("input",(function(e){e instanceof InputEvent&&(e.isComposing||(clearTimeout(o),o=setTimeout((function(){var t=e.target;t.value&&""!=t.value?f(t.value):h()}),800)))})),u.addEventListener("keyup",(function(e){if("Enter"===e.key){h();var t=e.target;t.value&&""!=t.value&&f(t.value)}}))},6111:function(e,t,n){n(228),n(3964),n(9749),n(6544),n(4254),n(752),n(1694),n(6265),n(1057),n(8932),n(560),n(739),n(8324);var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function c(e){try{s(i.next(e))}catch(e){r(e)}}function a(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,o,r,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(c=0)),c;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,i=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.patchData=t.postData=void 0,t.postData=function(e,t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)})];case 1:return[2,n.sent()]}}))}))},t.patchData=function(e,t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,fetch(e,{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)})];case 1:return[2,n.sent()]}}))}))}},2022:(e,t,n)=>{n.r(t)}},e=>{e.O(0,[739,726],(()=>{return t=9458,e(e.s=t);var t}));e.O()}]);